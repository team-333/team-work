<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 	
		"-//mybatis.org//DTD Mapper 3.0//EN" 
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace="com.itbank.dao.StudyDAO">
	<select id="selectAllStudies" resultType="StudyVO">
		select * from team 
			order by teamid asc
	</select>
	
	<insert id="insertStudy" parameterType="StudyVO">
		insert into team 
		(TEAMNAME, TEAMINFO, TEAMPUBLIC, TEAMPICTURE, DELEGATE) 
			values (#{teamName}, #{teamInfo}, #{teamPublic}, #{teamPicture}, #{delegate})
	</insert>
	
	<select id="selectSeq" resultType="int">
	select max(teamid) from team
	</select>

	<!-- 스터디 회원가입, 스터디 생성 -->
	<insert id="memberTeamInsert" parameterType="com.itbank.vo.MemberTeamVO">
		insert into memberteam(memberid, teamid) values(#{memberId}, #{teamId})
	</insert>
	
	<select id="selectMemberStudies" parameterType="int" resultType="StudyVO">
		select team.* from memberteam 
			join team on team.teamid = memberteam.teamid
			where memberteam.memberid = #{memberId}
	</select>
	
	<select id="selectStudy" resultType="StudyVO" parameterType="int">
		select * from team where teamid = #{teamId}
	</select>
	
	<!-- 승인신청 대기 -->
	<insert id="waitingTeam" parameterType="com.itbank.vo.MemberTeamVO">
		insert into waiting(memberid, teamid) values(#{memberId}, #{teamId})
	</insert>
	
	<select id="team" parameterType="int" resultType="StudyVO">
		
		select *from team where teamid = #{teamId}
	</select>
	
	<update id="toggleChange" parameterType="StudyVO">
		update team set teampublic = #{teamPublic} where teamid = #{teamId}
	</update>
	
</mapper>
		
